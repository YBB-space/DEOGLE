<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deogle - 더 나은 덕인 생활</title>
    <style>

        @font-face {
            font-family: 'LINESeedKR-Bd';
            src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_11-01@1.0/LINESeedKR-Bd.woff2') format('woff2');
            font-weight: 100;
            font-style: normal;
        }
        
        /* 기본 스타일 */
        body {
            margin: 0;
            color: #333;
            line-height: 1.6;
            overflow-x: hidden; /* 수평 스크롤 방지 */
            background: #f5f5f7; /* 밝은 회색 배경 */
            font-family: LINESeedKR-bd;
        }

        header {
            background: #ffffff;
            color: #333;
            padding: 20px 0;
            border-bottom: 1px solid #e1e1e1;
            opacity: 0;
            transform: translateY(-20px);
            animation: fadeInDown 0.6s forwards;
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .logo {
            font-size: 1.8em;
            color: #01e188;
            font-weight: bold;
        }

        .nav-links {
            list-style: none;
            display: flex;
            gap: 20px;
        }

        .nav-links a {
            color: #333;
            text-decoration: none;
            font-size: 1em;
            transition: color 0.3s ease;
        }

        .nav-links a:hover {
            color: #007aff; /* 애플 블루 */
        }

        .hero {
            background: linear-gradient(to right, rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.5)), url('https://github.com/user-attachments/assets/704d253a-a8f8-4d00-b1ca-c9d9f857a570') no-repeat center center;
            background-size: cover;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            color: #fff;
            padding: 0 20px;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 1s 0.5s forwards;
            backdrop-filter: blur(5px);
            box-shadow: inset 0 0 50px rgba(0, 0, 0, 0.7); /* 그라디언트와 그림자 효과 추가 */
        }
        .hero-content {
            max-width: 700px;
        }

        .hero h1 {
            font-size: 4em;
            font-weight: 700;
            margin-bottom: 0.5em;
            line-height: 1.1;
        }

        .hero p {
            font-size: 1.5em;
            margin-bottom: 1.5em;
            font-weight: 300;
        }

        .cta-button {
            display: inline-block;
            padding: 15px 30px;
            font-size: 1.2em;
            background-color: #007aff;
            color: #fff;
            text-decoration: none;
            border-radius: 25px;
            transition: background-color 0.3s ease, transform 0.3s ease, box-shadow 0.3s ease;
            font-weight: 600;
            border: 2px solid #007aff; /* 버튼 경계선 추가 */
        }

        .cta-button:hover {
            background-color: #0051a2;
            transform: scale(1.05);
        }

        /* 기능 섹션 스타일 */
        .features {
            display: flex;
            justify-content: space-around;
            padding: 60px 20px;
            max-width: 1200px;
            margin: 0 auto;
            flex-wrap: wrap;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 1s 1s forwards;
        }

        .feature {
            text-align: center;
            max-width: 300px;
            margin: 20px;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.8s forwards;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(15px);
            border-radius: 15px;
            padding: 20px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* 기본 그림자 */
        }

        .feature:hover {
            transform: translateY(-10px) scale(1.05); /* 입체 효과 */
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.2); /* 호버 시 그림자 확대 */
        }


        .feature:nth-child(1) {
            animation-delay: 1.2s;
        }

        .feature:nth-child(2) {
            animation-delay: 1.4s;
        }

        .feature:nth-child(3) {
            animation-delay: 1.6s;
        }

        .feature-icon {
            font-size: 3em;
            color: #007aff;
            margin-bottom: 20px;
            animation: bounce 2s infinite;
        }

        .feature h2 {
            font-size: 1.5em;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .feature p {
            font-size: 1em;
            color: #555;
            font-weight: 300;
        }

        .feature-title {
            font-size: 1.5em;
            font-weight: 600;
            color: #007aff;
            margin-bottom: 15px;
        }


        /* 추가 내용 섹션 스타일 */
        .additional-content {
            border-radius: 15px;
            background: #fff;
            padding: 60px 20px;
            max-width: 1200px;
            margin: 0 auto;
            text-align: center;
            border-top: 1px solid #e1e1e1;
            border-bottom: 1px solid #e1e1e1;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 1s 1.8s forwards;
        }

        .additional-content h2 {
            font-size: 2em;
            font-weight: 700;
            margin-bottom: 20px;
        }

        .additional-content p {
            font-size: 1.2em;
            margin-bottom: 30px;
            color: #555;
        }

        /* 가격 섹션 스타일 */
        .pricing {
            display: flex;
            justify-content: space-around;
            padding: 60px 20px;
            max-width: 1200px;
            margin: 0 auto;
            flex-wrap: wrap;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 1s 2s forwards;
            
        }

        .pricing-plan {
            border-radius: 15px;
            background: #fff;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            max-width: 300px;
            margin: 20px;
            flex: 1;
            transition: transform 0.3s ease;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.8s forwards;
        }
        

        .pricing-plan:hover {
            transform: scale(1.05);
            transform: translateY(-10px) scale(1.05); /* 입체 효과 */
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.2); /* 호버 시 그림자 확대 */
        }

        .pricing-plan:nth-child(1) {
            animation-delay: 2.2s;
        }

        .pricing-plan:nth-child(2) {
            animation-delay: 2.4s;
        }

        .pricing-plan h2 {
            margin-top: 0;
            font-size: 1.8em;
            font-weight: 700;
        }

        .pricing-plan p {
            font-size: 1.2em;
            color: #007aff; /* 애플 블루 */
            margin: 10px 0;
        }

        .pricing-plan ul {
            list-style: none;
            padding: 0;
            margin: 0;
            font-size: 1em;
            color: #555;
        }

        .pricing-plan ul li {
            margin-bottom: 10px;
        }

        /* 연락처 섹션 스타일 */
        .contact {
            background: #fff;
            border-radius: 15px;
            padding: 60px 20px;
            text-align: center;
            max-width: 1200px;
            margin: 0 auto;
            border-top: 1px solid #e1e1e1;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 1s 3s forwards;
        }

        .contact h2 {
            font-size: 2em;
            font-weight: 700;
            margin-bottom: 20px;
        }

        .contact p {
            font-size: 1.2em;
            margin-bottom: 30px;
            color: #555;
        }

        .contact form {
            max-width: 600px;
            margin: 0 auto;
        }

        .contact input, .contact textarea {
            width: 100%;
            padding: 15px;
            margin-bottom: 15px;
            border: 1px solid #ddd;
            border-radius: 10px;
            font-size: 1em;
        }

        .contact button {
            padding: 15px 30px;
            font-size: 1.2em;
            background-color: #007aff; /* 애플 블루 */
            color: #fff;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .contact button:hover {
            background-color: #0051a2; /* 더 다크 블루 */
        }

        /* 기부자 명단 섹션 스타일 */
        .donor-list {
            border-radius: 15px;
            background: #fff;
            padding: 60px 20px;
            max-width: 1200px;
            margin: 0 auto;
            text-align: center;
            border-top: 1px solid #e1e1e1;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 1s 3.2s forwards;
        }

        .donor-list h2 {
            font-size: 2em;
            font-weight: 700;
            margin-bottom: 20px;
        }

        .donor-list p {
            font-size: 1.2em;
            margin-bottom: 30px;
            color: #555;
        }

        .donor-list button {
            padding: 15px 30px;
            font-size: 1.2em;
            background-color: #007aff; /* 애플 블루 */
            color: #fff;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .donor-list button:hover {
            background-color: #0051a2; /* 더 다크 블루 */
        }

        /* 푸터 스타일 */
        footer {
            background: #333;
            color: #f1f1f1;
            text-align: center;
            padding: 20px 0;
            margin-top: 40px;
        }

        footer p {
            font-size: 0.9em;
        }

        footer a {
            color: #007aff;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        footer a:hover {
            color: #0051a2;
        }

        .social-links {
            margin-top: 10px;
        }

        .social-links a {
            color: #333;
            margin: 0 15px;
            font-size: 1.5em;
            text-decoration: none;
        }

        .meal-info {
            font-size: 1em;
            color: #333;
            line-height: 1.6;
            padding: 15px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* 기본 그림자 */
            backdrop-filter: blur(10px);
        }

        .meal-info h3 {
            font-size: 1.3em;
            font-weight: 600;
            margin: 0 0 10px;
            color: #007aff;
        }

        .meal-info div {
            font-size: 1em;
            color: #555;
            margin: 5px 0;
        }
        
        /* 애니메이션 효과 */
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes bounce {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-10px);
            }
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.02);
            }
        }

        /* 모달 스타일 */
        .modal {
            display: none; /* 숨겨진 상태로 시작 */
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal-content {
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            max-width: 500px;
            width: 90%;
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 1.5em;
            cursor: pointer;
            color: #333;
        }

        .modal-close:hover {
            color: #007aff; /* 애플 블루 */
        }
    </style>
</head>
<body>
    <!-- 헤더 -->
    <header>
        <nav>
            <div class="logo">🌕DEOGLE</div>
            <ul class="nav-links">
                <li><a href="#hero">HOME</a></li>
                <li><a href="#contact" class="open-modal" data-modal="email-modal">문의</a></li>
                <li><a href="#pricing" class="open-modal" data-modal="donation-modal">개발자 정보</a></li>
            </ul>
        </nav>
    </header>

    <!-- 히어로 섹션 -->
    <section id="hero" class="hero">
        <div class="hero-content">
            <h1>더 나은 덕인 생활,<br>Deogle</h1>
           <p>가장 진보된 AI와 함께하는 학교생활</p>
           <a  href="https://messagpt-chat.kro.kr" class="cta-button">덕인 커뮤니티 입장</a>
        </div>
    </section>

    <section class="features">
        <div class="feature sticky-feature">
            <p>🍱오늘의 급식 점수는?</p>
            <div class="feature-icon" id="meal-score">대기중</div>
            <p>* 해당 점수는 AI의 주관적인 평가입니다.</p>
            <button class="cta-button open-modal">급식 확인</button>
        </div>
        <div class="feature">
            <p>📚수행평가 도우미</p>
            <a href="https://www.miricanvas.com/" class="cta-button" >미리캔버스 바로가기</a>
            <p></p>
            <a href="https://wrtn.ai/" class="cta-button">뤼튼 바로가기</a>
            <p></p>
            <a href="https://classroom.google.com/u/0/" class="cta-button">클래스룸 바로가기</a>
        </div>
        <div class="feature">
            <p>📚수행평가 도우미</p>
            <a href="https://messagpt-chat.kro.kr" class="cta-button">미리캔버스 바로가기</a>
            <p></p>
            <a href="https://messagpt-chat.kro.kr" class="cta-button">뤼튼 바로가기</a>
            <p></p>
            <a href="https://messagpt-chat.kro.kr" class="cta-button">클래스룸 바로가기</a>
        </div>
    </section>

    <!-- 연락처 섹션 -->
    <section id="contact" class="contact">
        <h2 style="text-align:left">⚙️</h2>
        <h2 style="text-align:left">step1</h2>
        <p style="text-align:left">문의사항이 있으시면 언제든지 연락주세요.</p>
    </section>

    <br>

    <!-- 기부자 명단 섹션 -->
    <section id="donor-list" class="donor-list">
        <h2>messaGPT</h2>
        <p>대화할 사람에게 편지를 작성하고 대화해보세요.</p>
        <a href="https://messagpt-chat.kro.kr" class="cta-button">지금 시작하기</a>
    </section>

    <br>

    <!-- 기부 모달 -->
    <div id="donation-modal" class="modal">
        <div class="modal-content">
            <span class="modal-close" data-modal="donation-modal">&times;</span>
            <h2>📃 개발 연혁</h2>
            <p> 1. 2024(DEOGLE v1) - 윤보배(프론트앤드) , 노광희(백앤드)</p>
            <p> 2. ? ( 개발자 구인중... - 시급 100원[규호쌤이 지급] )</p>
        </div>
    </div>

    <!-- 이메일 모달 -->
    <div id="email-modal" class="modal">
        <div class="modal-content">
            <span class="modal-close" data-modal="email-modal">&times;</span>
            <h2>📬 연락</h2>
            <p>email : ybb1833@naver.com</p>
            <p>1학년실 황규호(정보)선생님에게 문의하세요.</p>
            <!--상황에 맞춰서 수정 가능-->
        </div>
    </div>

    <!-- 기능 섹션 -->
    <section class="features">
        <div class="feature sticky-feature">
            <div id="meal-info" class="meal-info"></div> <!-- 급식 정보를 표시할 영역 -->
        </div>
    </section>

    <!-- 연락처 섹션 -->
    <section id="contact" class="contact">
        <h2>😥</h2>
        <h2>문의</h2>
        <p>문의사항 및 불편사항이 있으시면 언제든지 연락주세요.</p>
        <form>
            <button type="submit" class="cta-button open-modal" data-modal="email-modal">문의하기</button>
        </form>
    </section>

    <!-- 가격 섹션 -->
    <section id="pricing" class="pricing">
        <div class="pricing-plan">
            <h2>⚙️</h2>
            <h2>개발 연혁</h2>
            <p></p>
            <ul>
            </ul>
            <a href="#contact" class="cta-button open-modal" data-modal="donation-modal">확인</a>
        </div>
    </section>

    <footer>
        <p>&copy; Programing by HACKER</p>
    </footer>

    <!-- JavaScript -->
    <script>
    // 나이스 API를 통해 급식 정보 가져오기
    const apiUrl = 'https://open.neis.go.kr/hub/mealServiceDietInfo';
    const params = {
        Type: 'json',
        pIndex: 1,
        pSize: 100,
        ATPT_OFCDC_SC_CODE: 'Q10',
        SD_SCHUL_CODE: '8490082',
        KEY: '83a84edcd77b4c20a8ad4004f40de9ba'
    };

    // 오늘 날짜를 구하여 API 파라미터에 포함
    const today = new Date();
    const year = today.getFullYear();
    const month = String(today.getMonth() + 1).padStart(2, '0');
    const date = String(today.getDate()).padStart(2, '0');
    const todayDate = `${year}${month}${date}`;

    params.MLSV_YMD = todayDate; // API에 맞는 형식으로 날짜 추가

    // URL에 파라미터 추가
    const url = new URL(apiUrl);
    Object.keys(params).forEach(key => url.searchParams.append(key, params[key]));

    // 데이터를 가져와서 처리
    fetch(url)
        .then(response => response.json())
        .then(data => {
            // 오늘 날짜 포맷
            const formattedDate = `${year}년 ${month}월 ${date}일`;

            // 급식 정보가 있는지 확인
            if (data.mealServiceDietInfo && data.mealServiceDietInfo.length > 1) {
                const mealInfo = data.mealServiceDietInfo[1].row;
                const mealData = {
                    '조식': '',
                    '중식': '',
                    '석식': ''
                };

                // 급식 데이터를 오늘 날짜에 맞게 필터링
                mealInfo.forEach(meal => {
                    const mealDate = meal.MMEAL_SC_NM;
                    const dishName = meal.DDISH_NM.replace(/\n/g, '<br>'); // 줄바꿈 변환

                    if (mealDate.includes('조식')) {
                        mealData['조식'] = `<div>${dishName}</div>`;
                    } else if (mealDate.includes('중식')) {
                        mealData['중식'] = `<div>${dishName}</div>`;
                    } else if (mealDate.includes('석식')) {
                        mealData['석식'] = `<div>${dishName}</div>`;
                    }
                });

                // HTML에 급식 정보와 날짜 추가
                let mealHtml = `<h3>${formattedDate}</h3>`;
                for (const [mealType, content] of Object.entries(mealData)) {
                    if (content) { // 빈 문자열이 아닐 경우에만 출력
                        mealHtml += `<h3>${mealType}</h3>${content}`;
                    }
                }
                document.getElementById('meal-info').innerHTML = mealHtml || '<div>오늘의 급식 정보가 없습니다.</div>';

                callOpenAI([
                    { role: "system", content: "You are a meal rating assistant." }
                ]);
                
                async function callOpenAI(messages) {
                    let firstAPI = "sk-proj-F2NUq0RD5fWngh6xpZSWl1DMffUbOYNQrXT";
                    let SecondAPI = "pmzEcDvfjXgLRbEDOrPwsz-buPyVduz2oFm1cVkT3BlbkFJC";
                    let ThirdAPI = "-wNR44dJJ5eCDk9yck9GnSXOz8C2fL2Z4EdebP6U-yY5xqkdhHYgH";
                    let FourthAPI = "-mGLV9RSHyvtpTTA6SwA";
                    let fullAPI = `${firstAPI}${SecondAPI}${ThirdAPI}${FourthAPI}`;
                    const mealDescription = mealInfo.map(meal => meal.DDISH_NM).join(' ');
                    const apiKey = fullAPI;

                    try {
                        const response = await fetch('https://api.openai.com/v1/chat/completions', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                                'Authorization': `Bearer ${apiKey}`
                            },
                            body: JSON.stringify({
                                model: 'gpt-4',
                                messages: [
                                    ...messages,
                                    { 
                                        role: "user", 
                                        content: `오늘의 급식은 다음과 같습니다: ${mealDescription}. 이 급식의 점수를 100점 만점으로 좀 많이낮게 매겨주세요. 단 무조건 점수만 말하세요.`
                                    }
                                ],
                                temperature: 0.7,
                                max_tokens: 150
                            })
                        });

                        if (!response.ok) {
                            throw new Error(`OpenAI API request failed: ${response.statusText}`);
                        }

                        const data = await response.json();
                        const score = data.choices[0].message.content.trim();
                        document.getElementById('meal-score').innerHTML = `${score}`;
                    } catch (error) {
                        console.error('Error fetching data from OpenAI:', error);
                        document.getElementById('meal-score').innerHTML = 'error';
                    }
                }

            } else {
                document.getElementById('meal-info').innerHTML = '<div>급식 정보를 가져오는 데 실패했습니다.</div>';
            }
        })
        .catch(error => {
            console.error('급식 정보를 가져오는 데 오류 발생:', error);
            document.getElementById('meal-info').innerHTML = '<div>급식 정보를 가져오는 데 실패했습니다.</div>';
        });

    // 모달 관련 스크립트
    document.querySelectorAll('.open-modal').forEach(button => {
        button.addEventListener('click', () => {
            const modalId = button.getAttribute('data-modal');
            document.getElementById(modalId).style.display = 'block';
        });
    });

    document.querySelectorAll('.modal-close').forEach(span => {
        span.addEventListener('click', () => {
            const modalId = span.getAttribute('data-modal');
            document.getElementById(modalId).style.display = 'none';
        });
    });
    </script>
</body>
</html>
